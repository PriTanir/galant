
\begin{figure}

\begin{minipage}{0.5\textwidth}
\small
\begin{verbatim}
int time;
int [] discovery;
int [] finish;

function visit( Node v ) {
    time = time + 1;
    discovery[id(v)] = time;
    beginStep();
    v.setLabel( "" + discovery[id(v)] );
    v.setSelected( true );
    endStep();
    for_outgoing( v, e, w ) {
        beginStep();
        if ( ! w.isSelected() ) {
            e.setSelected( true );
            visit(w);
        }
        else if ( finish[id(w)] == 0 ) {
            e.setLabel( "B" );
        }
        else if ( finish[id(w)] 
                  > discovery[id(v)] ) {
            e.setLabel( "F" );
        }
        else {
            e.setLabel( "C" );
        }
        endStep();
    }
    time = time + 1;
    finish[id(v)] = time;
    beginStep();
    v.mark();
    v.setLabel( "" + discovery[id(v)]
                + "/" + finish[id(v)] );
    endStep();
}

algorithm {
    time = 0;
    discovery = new int[nodeIds()];
    finish = new int[nodeIds()];
    for_nodes( u ) {
        if ( ! u.isSelected() ) {
            visit( u );
        }
    }
}
\end{verbatim}
\end{minipage}
\begin{minipage}{0.49\textwidth}
\centering

\includegraphics[scale=0.5]{X_dfs_d_1}

After first non-tree edge is labeled. 

\medskip

\includegraphics[scale=0.5]{X_dfs_d_2}

After all but one non-tree edges have been labeled.

\end{minipage}
\caption{Implementation of a depth-first search animation
  with an illustration of the graph panel during execution.}
\label{fig:dfs}
\end{figure}
